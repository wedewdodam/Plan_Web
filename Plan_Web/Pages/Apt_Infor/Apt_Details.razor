@page "/Apt_Infor/Apt_Details"

@if (bnnA == null)
{
    <p style="text-align:center">
        <img src="/images/loader.gif" height="100" />
    </p>
}
else
{
    <div class="card">
        <div class="card-header">
            <table width="100%">
                <tr>
                    <td><span style="font-size: 1em"> <span class="bi-alarm"></span>&nbsp;<span>동현황 정보</span></span>&nbsp;&nbsp;&nbsp;<span style="font-size: 0.9em; color: darkcyan">(총 세대수 : @string.Format("{0: ###,###.##}", num)<span>세대</span>)</span></td>
                    <td align="right">
                        <button type="button" class="btn btn-outline-secondary btn-sm" @onclick="btnOpenA">동현황 정보 등록</button>
                    </td>
                </tr>
            </table>
        </div>
        <div class="card-body">
            <table class="table table-sm" style="font-size: 0.9em; margin-bottom: 0px">
                <thead>
                    <tr style="background-color:whitesmoke; border-top-width: 2px; border-top-style: solid; border-top-color: darkgray">
                        <th class="text-center">동명</th>
                        <th class="text-center">세대수</th>
                        <th class="text-center">층수</th>
                        <th class="text-center">복도형태</th>
                        <th class="text-center">길이(M)</th>
                        <th class="text-center">폭(M)</th>
                        <th class="text-center">라인수</th>
                        <th class="text-center">승강기수</th>
                        <th class="text-center">통로수</th>
                        <th class="text-center">지붕형태</th>
                        <th class="text-center">바닥면적</th>
                        <th class="text-center">버튼</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var st in bnnA)
                    {
                        <tr style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: darkgray">
                            <td class="text-center" style="vertical-align: middle">
                                @st.Dong_Name
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @st.Family_Num
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @st.Floor_Num
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @st.Hall_Form
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @st.Length
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @st.Width
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @st.Line_Num
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @st.Elevator_Num
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @st.Exit_Num
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @st.Roof_Form
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @string.Format("{0: ###,###}", st.Dong_Area)<span>㎡</span>
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                <button class="btn btn-link btn-sm" @onclick="() => OnEditA(st)">수정</button> <button @onclick="() => OnRemoveA(st.Aid)" class="btn btn-link btn-sm">삭제</button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
}

@if (bnnB == null)
{
    <p style="text-align:center">
        <img src="/images/loader.gif" height="100" />
    </p>
}
else
{
    <div class="card" style="margin-top: 10px">
        <div class="card-header">
            <table width="100%">
                <tr>
                    <td><span style="font-size: 1em"> <span class="bi-alarm"></span>&nbsp;<span>동구성 정보 목록</span></span></td>
                    <td align="right">
                        <button type="button" class="btn btn-outline-secondary btn-sm" @onclick="btnOpenB">동구성정보 등록</button>
                    </td>
                </tr>
            </table>
        </div>
        <div class="card-body">
            <table class="table table-sm" style="font-size: 0.9em; margin-bottom: 0px">
                <thead>
                    <tr style="background-color:whitesmoke; border-top-width: 2px; border-top-style: solid; border-top-color: darkgray">

                        <th class="text-center">평 형</th>
                        <th class="text-center">공급면적</th>
                        <th class="text-center">세대수</th>
                        <th class="text-center">합 계(㎡)</th>
                        <th class="text-center">입력일</th>
                        <th class="text-center">버 튼</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var st in bnnB)
                    {
                        <tr style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: darkgray">

                            <td class="text-center" style="vertical-align: middle">
                                @string.Format("{0: ###,###.#}", (st.Supply_Area / 3.3))<span>평형</span>
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @st.Supply_Area<span>㎡</span>
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @st.Area_Family_Num<span>세대</span>
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @string.Format("{0: ###,###.####}", st.Total_Area)<span>㎡</span>
                            </td>
                            <td class="text-center" style="vertical-align: middle">
                                @st.PostDate.ToShortDateString()
                            </td>

                            <td class="text-center" style="vertical-align: middle">
                                <button class="btn btn-link btn-sm" @onclick="() => OnEditB(st)">수정</button> <button @onclick="() => OnRemoveB(st.Aid)" class="btn btn-link btn-sm">삭제</button>
                            </td>
                        </tr>

                    }

                    <tr style="background-color: gainsboro; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: darkgray; border-top-width: 2px; border-top-style: solid; border-top-color: darkgray">

                        <td class="text-center" style="vertical-align: middle">
                            합계
                        </td>
                        <td class="text-center" style="vertical-align: middle">
                            @string.Format("{0: ###,###.####}", FnnB.Supply_Area)<span>㎡</span>
                        </td>
                        <td class="text-center" style="vertical-align: middle">
                            @string.Format("{0: ###,###}", FnnB.Area_Family_Num)<span>세대</span>
                        </td>
                        <td class="text-center" style="vertical-align: middle">
                            @string.Format("{0: ###,###.####}", FnnB.Total_Area)<span>㎡</span>
                        </td>
                        <td class="text-center" style="vertical-align: middle">
                        </td>

                        <td class="text-center" style="vertical-align: middle">
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
}

@if (InsertViewsA == "B")
{
    <div class="modal fade show d-block" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header" style="background-color: cornflowerblue; color: white">
                    <h5 class="modal-title"><span class="bi-house-door"></span>&nbsp;@strTitle</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" @onclick="btnCloseA">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <table class="table" style="margin-bottom: 0px">
                        <tr>
                            <td width="50%">
                                <div class="input-group">
                                    <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;동명</span></div>
                                    <input id="txtDong_Name" name="txtDong_Name" style="font-size: 0.9em" @bind="bnn.Dong_Name" class="form-control" type="text" />
                                    <div class="input-group-append">
                                        <span class="input-group-text" style="font-size: 0.9em">동</span>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="input-group">
                                    <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;세대수</span></div>
                                    <input id="Family_Num" name="Family_Num" style="font-size: 0.9em" @bind="bnn.Family_Num" class="form-control" type="number" />
                                    <div class="input-group-append">
                                        <span class="input-group-text" style="font-size: 0.9em">세대</span>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>

                            <td>
                                <div class="input-group">
                                    <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;동폭</span></div>
                                    <input id="Width" name="Width" style="font-size: 0.9em" @onchange="onWidthA" value="@bnn.Width" class="form-control" type="number" />
                                    @*<InputNumber id="txtWidth" Value="@bnn.Width" ValueChanged="onWidth"></InputNumber>*@
                                    <div class="input-group-append">
                                        <span class="input-group-text" style="font-size: 0.9em">미터</span>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="input-group">
                                    <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;동길이</span></div>
                                    <input id="Length" name="Length" style="font-size: 0.9em" @onchange="onWidthB" value="@bnn.Length" class="form-control" type="number" />
                                    <div class="input-group-append">
                                        <span class="input-group-text" style="font-size: 0.9em">미터</span>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                <div class="input-group">
                                    <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;층수</span></div>
                                    <input id="Floor_Num" name="Floor_Num" style="font-size: 0.9em" @bind="bnn.Floor_Num" class="form-control text-center" type="number" />
                                    <div class="input-group-append">
                                        <span class="input-group-text" style="font-size: 0.9em">층</span>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="input-group">
                                    <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;라인수</span></div>
                                    <input id="Line_Num" name="Line_Num" style="font-size: 0.9em" @bind="bnn.Line_Num" class="form-control text-center" type="number" />
                                    <div class="input-group-append">
                                        <span class="input-group-text" style="font-size: 0.9em">개</span>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td width="33%">
                                <div class="input-group">
                                    <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;승강기수</span></div>
                                    <input id="Elevator_Num" name="Elevator_Num" style="font-size: 0.9em" @bind="bnn.Elevator_Num" class="form-control text-center" type="number" />
                                    <div class="input-group-append">
                                        <span class="input-group-text" style="font-size: 0.9em">대</span>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="input-group">
                                    <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;통로수</span></div>
                                    <input id="Exit_Num" name="Exit_Num" style="font-size: 0.9em" @bind="bnn.Exit_Num" class="form-control text-center" type="number" />
                                    @*<InputNumber @bind-Value="bnn.Build_Area"></InputNumber>*@
                                    <div class="input-group-append">
                                        <span class="input-group-text" style="font-size: 0.9em">개</span>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                <div class="input-group">
                                    <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;복도형태</span></div>
                                    <select id="Hall_Form" style="font-size: 0.9em" class="custom-select" @bind="bnn.Hall_Form">
                                        <option value="Z">::복도형태선택::</option>
                                        <option value="계단식">계단식</option>
                                        <option value="복도식">복도식</option>
                                        <option value="혼합식">혼합식</option>
                                    </select>
                                </div>
                            </td>
                            <td>
                                <div class="input-group">
                                    <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;지붕형태</span></div>
                                    <select id="Roof_Form" style="font-size: 0.9em" class="custom-select" @bind="bnn.Roof_Form">
                                        <option value="Z">::지붕형태선택::</option>
                                        <option value="슬라브지붕">슬라브지붕</option>
                                        <option value="아스팔트슁글">아스팔트슁글</option>
                                        <option value="금속기와">금속기와</option>
                                        <option value="기와지붕">기와지붕</option>
                                        <option value="혼합식지붕">혼합식지붕</option>
                                        <option value="기타지붕">기타지붕</option>
                                    </select>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="input-group">
                                    <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;동 면적</span></div>
                                    <input id="Dong_Area" name="Dong_Area" style="font-size: 0.9em" @bind="bnn.Dong_Area" readonly="readonly" class="form-control text-center" type="number" />
                                    <div class="input-group-append">
                                        <span class="input-group-text" style="font-size: 0.9em">㎡</span>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="input-group">

                                    <input id="Dong_Etc" name="Dong_Etc" style="font-size: 0.9em" @bind="bnn.Dong_Etc" placeholder="동 설명 입력" class="form-control text-center" type="text" />
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm" @onclick="btnSaveA">저장</button> &nbsp; &nbsp; &nbsp;
                    <button type="button" class="btn btn-secondary btn-sm" @onclick="btnCloseA">닫기</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-backdrop show"></div>
}

@if (InsertViewsB == "B")
{
    <div class="modal fade show d-block" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header" style="background-color: cornflowerblue; color: white">
                    <span class="modal-title"><span class="bi-house-door"></span>&nbsp;@strTitle</span>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" @onclick="btnCloseB">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">

                    <div class="input-group">
                        <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;평형</span></div>
                        <input id="PArea" name="PArea" style="font-size: 0.9em" @bind="PArea" class="form-control" type="text" />

                        <div class="input-group-append">
                            <span class="input-group-text" style="font-size: 0.9em">3.3㎡</span>
                        </div>
                    </div>
                    <br />

                    <div class="input-group">
                        <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;주택공급면적</span></div>
                        <input id="Supply_Area" name="Supply_Area" style="font-size: 0.9em" @onchange="onTAreaA" value="@FnnA.Supply_Area" class="form-control" type="number" />
                        <div class="input-group-append">
                            <span class="input-group-text" style="font-size: 0.9em">㎡</span>
                        </div>
                    </div>

                    <br />

                    <div class="input-group">
                        <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;면적별 세대수</span></div>
                        <input id="Area_Family_Num" name="Area_Family_Num" style="font-size: 0.9em" @onchange="onTAreaB" value="@FnnA.Area_Family_Num" class="form-control" type="number" />
                        <div class="input-group-append">
                            <span class="input-group-text" style="font-size: 0.9em">세대</span>
                        </div>
                    </div>

                    <br />

                    <div class="input-group">
                        <div class="input-group-prepend"><span class="input-group-text" style="font-size: 0.9em"><span class="bi-pencil-square"></span>&nbsp;합계</span></div>
                        <input id="Total_Area" name="Total_Area" style="font-size: 0.9em" @bind="FnnA.Total_Area" class="form-control" type="number" readonly="readonly" />
                        <div class="input-group-append">
                            <span class="input-group-text" style="font-size: 0.9em">㎡</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm" @onclick="btnSaveB">저장</button> &nbsp; &nbsp; &nbsp;
                    <button type="button" class="btn btn-secondary btn-sm" @onclick="btnCloseB">닫기</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-backdrop show"></div>
}